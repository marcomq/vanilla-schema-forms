- id: TASK-001
  title: CodeRabbit
  description: "..."
  impact: Medium
  status: Backlog
  affectedFiles:
    - "@src"
- id: TASK-005
  title: Robust Path Handling
  description: >-
    **Problem:** The codebase currently uses multiple, fragile string-based path representations:
    1. **UI Path (`path` in `renderNode`):** A dot-separated string for HTML `id`s (e.g., `root.prop`). Fails if keys contain dots.
    2. **Data Path (`dataPath` in `renderNode`):** A slash-separated string for HTML `name` attributes and error mapping (e.g., `/root/prop`). Fails if keys contain slashes.
    3. **Event Path (`resolvePath`):** Often reverse-engineered by splitting the UI Path string, which is a primary source of bugs.

    **Plan:** Consolidate around a single, robust path representation.
    1. **The "One Path":** The source of truth will be a `dataPathArray` of type `(string | number)[]` (e.g., `['root', 'prop', 0]`), which is unambiguous.
    2. **Update `RenderContext`:** `elementIdToDataPath` will become `Map<string, (string | number)[]>`, linking an opaque element ID to its true data path array.
    3. **Refactor `renderer.ts`:** `renderNode` will pass this array down recursively. `getName` will be updated to generate the HTML `name` attribute from this array. `dataPathRegistry` will be keyed by standard JSON Pointers (RFC 6901) derived from the array for robust validation error mapping.
    4. **Refactor `events.ts`:** `resolvePath` will be simplified to a direct `Map` lookup, removing all fragile `split('.')` logic. Path update functions (for array reordering, etc.) will be refactored to manipulate arrays instead of strings.
  impact: Medium
  status: Planning
  affectedFiles:
    - "@src/state.ts"
    - "@src/renderer.ts"
    - "@src/parser.ts"
    - "@src/events.ts"
    - "@src/dom-renderer.ts"
- id: TASK-006
  title: Create Playground
  description: >-
    Create a playground to test and modify multiple different schema and customization files, 
    similar as for jsonschema-form in https://rjsf-team.github.io/react-jsonschema-form/
  impact: Unknown
  status: In Progress
  affectedFiles:
    - "@example/customization.js"
    - "@src/index.ts"
    - "@example/index.html"
- id: TASK-007
  title: Optimize Customization for mq-bridge schema
  description: >-
    Optimize schema to improve UX: 
    2. Endpoint should be the first parameter in the form. First input, then output.
    3. Split input and output into visibly separate sections. 
    4. Compact input format. Don't show label above input. Render with label on left, input next and description on right in one line.
    5. Instead of beeing able to add middlewares, try to have checkboxes for middlewares, as multiple middleware with same type don't make sense. Just one middleware of each type is possible.
    6. Options are usually irrelevant. Hide options and make them configurable via additional button or extra tab.
  impact: Unknown
  status: In Queue
  affectedFiles:
    - "@example/customization.js"
    - "@src/index.ts"
    - "@example/index.html"
- id: TASK-014
  title: Recursive processElement in UI Schema Adapter
  description: >-
    Around line 60-66: The current setConfig call in adaptUiSchema overwrites layout.groups 
    and sorting.perObjectPriority causing previously stored rootId entries to be lost; 
    change it to merge into existing config instead of replacing—read the existing config 
    (or use the functional form of setConfig) and set layout.groups to a new object that spreads existing layout.groups plus the new {[rootId]: groups}, and similarly set sorting.perObjectPriority to spread existing 
    perObjectPriority plus {[rootId]: priority}; ensure you reference the same keys (layout.groups, sorting.perObjectPriority) and symbols (setConfig, adaptUiSchema, rootId, groups, priority) so other rootIds are preserved.
  impact: Medium
  status: Done
  affectedFiles:
    - "@src/ui-schema-adapter.ts"
- id: TASK-015
  title: Fix uint64 validation
  description: >-
    Line 18: The current ajv.addFormat("uint64", { type: "number", ... }) cannot validate full 64-bit unsigned integers due to JS Number precision; 
    change the format implementation to accept string inputs (ajv.addFormat("uint64", { type: "string", validate: ... })) 
    and validate by parsing with BigInt (ensure the string is digits only and BigInt(value) is between 0n and (2n**64n - 1n)); alternatively, 
    if you must keep numeric inputs, update the validator to explicitly document the Number.MAX_SAFE_INTEGER limitation and reject values above it—modify the ajv.addFormat("uint64"...) 
    implementation and any calling code that supplies uint64 values accordingly.
  impact: Low
  status: Done
  affectedFiles:
    - "@src/validator.ts"
